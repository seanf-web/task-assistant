<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TASK Assistant</title>

  <!-- Performance + safety -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="//bycell.co">
  <link rel="dns-prefetch" href="//www.njtransit.com">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <!-- A conservative CSP that still allows inline styles (EBC) but blocks remote script injection -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https: data: blob:; img-src * data: blob:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com data:; script-src 'self' 'unsafe-inline'; connect-src https:; frame-ancestors 'self'; base-uri 'self'; form-action 'self' https://bycell.co https://www.njtransit.com">
  <meta name="theme-color" content="#145078" />

  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --task-blue-primary:#145078;
      --task-orange-primary:#ff911f;
      --task-blue-logo:#0085CA;
      --task-green-secondary:#74ba58;
      --task-yellow-secondary:#ffc91f;
      --task-teal-secondary:#33A7B5;
      --task-gray-light:#d9dad9;
      --task-gray-dark:#6b6b6b;
    }

    *{margin:0;padding:0;box-sizing:border-box}

    /* Subtle animated background that still performs well on mobile */
    @keyframes bgMove {
      0%{ background-position: 0% 50% }
      50%{ background-position: 100% 50% }
      100%{ background-position: 0% 50% }
    }

    body{
      font-family:'Open Sans',sans-serif;
      background:linear-gradient(135deg,var(--task-blue-primary),var(--task-teal-secondary));
      background-size: 200% 200%;
      animation: bgMove 18s ease infinite;
      min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px;
    }

    .app-container{
      width:100%;max-width:420px;background:#fff;border:3px solid var(--task-orange-primary);
      border-radius:18px;overflow:hidden;box-shadow:0 20px 40px rgba(20,80,120,.3);
    }

    .header{
      background:#fff;text-align:center;padding:14px 16px 12px;border-bottom:2px solid var(--task-blue-primary);
    }
    .assistant-banner{
      display:inline-block;background:var(--task-blue-primary);color:#fff;
      padding:6px 12px;border-radius:999px;font-family:'Nunito',sans-serif;
      font-size:13px;font-weight:700;letter-spacing:.2px;
    }
    .subline{
      color:var(--task-orange-primary);font-weight:700;font-size:12px;margin-top:6px;
      font-family:'Nunito',sans-serif;
    }

    .chat-area{height:360px;overflow-y:auto;padding:16px;background:#fafafa;scroll-behavior:smooth}
    .welcome-message{background:linear-gradient(135deg,#fff3e0,#ffe8d6);border:2px solid var(--task-orange-primary);border-radius:14px;padding:16px;margin-bottom:16px}
    .welcome-message h2{font-family:'Nunito',sans-serif;color:var(--task-blue-primary);font-size:18px;margin-bottom:10px}
    .language-notice{background:var(--task-green-secondary);color:#fff;border-radius:10px;padding:8px 12px;font-size:11px;text-align:center;margin:10px 0;font-weight:600}

    .quick-actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px;justify-content:center}
    .quick-actions a{display:inline-block;padding:6px 12px;font-size:11px;text-decoration:none;color:var(--task-blue-primary);background:#fff;border:1px solid var(--task-orange-primary);border-radius:20px;transition:.2s;font-weight:600}
    .quick-actions a:hover{background:var(--task-orange-primary);color:#fff;transform:translateY(-1px)}

    .message{margin:12px 0;padding:12px 16px;border-radius:16px;font-size:13px;line-height:1.4;animation:slideIn .3s ease}
    .user-message{background:linear-gradient(135deg,var(--task-orange-primary),var(--task-yellow-secondary));color:#fff;margin-left:20%;text-align:right;border-radius:16px 16px 4px 16px;box-shadow:0 4px 12px rgba(255,145,31,.3)}
    .bot-message{background:#fff;border:2px solid var(--task-blue-logo);color:var(--task-gray-dark);margin-right:20%;border-radius:16px 16px 16px 4px;box-shadow:0 3px 10px rgba(0,133,202,.15)}

    .typing-indicator{display:flex;align-items:center;background:var(--task-gray-light);padding:12px 16px;margin-right:20%;border-radius:16px 16px 16px 4px}
    .typing-dots span{width:6px;height:6px;background:var(--task-gray-dark);border-radius:50%;display:inline-block;margin:0 2px;animation:typing 1.4s infinite}
    .typing-dots span:nth-child(2){animation-delay:.2s}
    .typing-dots span:nth-child(3){animation-delay:.4s}

    .input-area{padding:16px;background:#fafafa;border-top:2px solid var(--task-blue-logo)}
    .language-reminder{font-size:11px;color:var(--task-blue-primary);background:linear-gradient(135deg,rgba(116,186,88,.1),rgba(51,167,181,.1));border:2px solid var(--task-green-secondary);border-radius:12px;padding:10px;text-align:center;margin-bottom:12px;font-weight:600}
    .input-container{display:flex;gap:10px;align-items:center}
    .input-container input{flex:1;padding:14px 18px;border:2px solid var(--task-blue-logo);border-radius:25px;font-size:13px;outline:none;background:#fff;transition:border-color .2s}
    .input-container input:focus{border-color:var(--task-orange-primary)}
    .send-button{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border:none;border-radius:50%;cursor:pointer;background:linear-gradient(135deg,var(--task-orange-primary),var(--task-yellow-secondary));box-shadow:0 4px 15px rgba(255,145,31,.3);color:#fff;font-size:18px;font-weight:bold;transition:transform .2s}
    .send-button:hover{transform:scale(1.05)}
    .status{text-align:center;font-size:10px;color:var(--task-gray-dark);margin-top:8px}

    @keyframes slideIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    @keyframes typing{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-10px)}}

    /* Respect reduced-motion */
    @media (prefers-reduced-motion: reduce){
      body{animation:none}
    }

    @media (max-width:480px){
      .app-container{margin:8px;border-radius:16px}
      .quick-actions{justify-content:center}
      .quick-actions a{font-size:10px;padding:5px 10px}
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="header">
      <div class="assistant-banner" role="heading" aria-level="1">TASK Assistant</div>
      <div class="subline">Trenton Area Soup Kitchen</div>
    </div>

    <div class="chat-area" id="chatArea" role="log" aria-live="polite" aria-label="Chat conversation">
      <div class="welcome-message">
        <h2>Welcome! Byenvini! ¬°Bienvenidos!</h2>
        <div class="language-notice">I speak English, Espa√±ol &amp; Krey√≤l</div>

        <!-- Quick actions work even if JS is blocked -->
        <div class="quick-actions" id="quickRow">
          <a href="https://www.google.com/maps/search/Trenton+Area+Soup+Kitchen"
             target="_blank" rel="noopener noreferrer" data-ask="Where are you located?">üìç Address</a>
          <a href="https://bycell.co/ddmtq" target="_blank" rel="noopener noreferrer" data-ask="I need job help">üíº Jobs</a>
          <a href="https://bycell.co/ddmtr" target="_blank" rel="noopener noreferrer" data-ask="Job alerts">üîî Alerts</a>
          <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener noreferrer" data-ask="Training programs">üéì Training</a>
          <a href="https://bycell.co/ddmui" target="_blank" rel="noopener noreferrer" data-ask="Resume help">üìÑ Resume</a>
          <a href="https://bycell.co/ddmua" target="_blank" rel="noopener noreferrer" data-ask="Resources">üß∞ Resources</a>
        </div>
      </div>

      <div id="messages"></div>
    </div>

    <div class="input-area">
      <div class="language-reminder">I speak English, Espa√±ol &amp; Krey√≤l</div>

      <div class="input-container">
        <input id="userInput" type="text"
               placeholder="Type: where are you? necesito trabajo? mwen bezwen ede?"
               autocomplete="off"
               inputmode="text"
               aria-label="Type your message"
               onkeydown="if(event.key==='Enter'){event.preventDefault(); if(window.sendMessage){window.sendMessage();}}">
        <button id="sendButton" class="send-button" type="button"
                onclick="if(window.sendMessage){window.sendMessage();}" aria-label="Send">‚û§</button>
      </div>

      <div class="status" id="status">‚ö†Ô∏è I can make mistakes - please double-check important info!</div>

      <!-- No-JS fallback helper -->
      <noscript>
        <p style="font-size:12px;margin-top:8px">
          JavaScript seems blocked here. Quick buttons above still open helpful pages.
          For full chat, view this page where JS is allowed.
        </p>
      </noscript>
    </div>
  </div>

  <script>
    /* =============== Chat logic =============== */
    function sendMessage(){
      const input = document.getElementById('userInput');
      const messagesDiv = document.getElementById('messages');
      const status = document.getElementById('status');
      if (!input || !messagesDiv) return;

      const message = (input.value || '').trim();
      if (!message) return;

      // User bubble (safe: textContent)
      const userMsg = document.createElement('div');
      userMsg.className = 'message user-message';
      userMsg.textContent = message;
      messagesDiv.appendChild(userMsg);

      input.value = '';
      if (status) status.textContent = 'ü§ñ Thinking‚Ä¶';

      // Typing indicator
      const typing = document.createElement('div');
      typing.className = 'typing-indicator';
      typing.innerHTML = '<div class="typing-dots"><span></span><span></span><span></span></div>';
      messagesDiv.appendChild(typing);

      const chatArea = document.getElementById('chatArea');
      if (chatArea) chatArea.scrollTop = chatArea.scrollHeight;

      // Quick response for kiosk feel
      setTimeout(() => {
        if (typing.parentNode) typing.parentNode.removeChild(typing);

        const response = getResponse(message);
        const botMsg = document.createElement('div');
        botMsg.className = 'message bot-message';
        botMsg.innerHTML = response; // response is our own template
        messagesDiv.appendChild(botMsg);

        if (chatArea) chatArea.scrollTop = chatArea.scrollHeight;

        if (status){
          status.textContent = '‚úÖ Answered!';
          setTimeout(()=>{ status.textContent = '‚ö†Ô∏è I can make mistakes - please double-check important info!'; }, 1500);
        }
        input.focus();
      }, 320);
    }
    window.sendMessage = sendMessage;

    // Lightweight language detection + routing
    function getResponse(input){
      const text = input.toLowerCase().trim();
      const isSpanish = /hola|necesito|trabajo|empleo|ayuda|donde|cuando|hora|horas|espa√±ol|¬ø|tel√©fono|direcci√≥n|cita|servicios|comida/.test(text);
      const isCreole  = /bonjou|bonswa|mwen|bezwen|travay|kote|ede|manje|krey√≤l|telef√≤n|adr√®s|randevou|s√®vis/.test(text);

      // EMPLOYMENT (Jobs, resume, interview, training)
      if (/(^|\s)(job|jobs|work|employment|career|hire|hiring|resume|interview|training|certification|forklift|sora|culinary|kitchen|cook|chef|warehouse|soft skills)(\s|$)|empleo|trabajo|entrevista|cocin|seguridad|travay|f√≤masyon/.test(text)){
        if (isSpanish){
          return `
            <strong>üíº Servicios de Empleo de TASK</strong><br><br>
            <strong>Para programar una cita:</strong> Llame al <a href="tel:609-337-1624">(609) 337-1624</a> (Social Services Specialist).<br><br>
            <strong>Programas:</strong><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">Academia Culinaria Emilio</a><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">Certificaci√≥n SORA</a><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">Certificaci√≥n de Montacargas</a><br>
            ‚Ä¢ TASK'd to Work (habilidades blandas)<br><br>
            <strong>Enlaces:</strong> <a href="https://bycell.co/ddmtq" target="_blank" rel="noopener">Empleos</a> ‚Ä¢
            <a href="https://bycell.co/ddmtr" target="_blank" rel="noopener">Alertas</a> ‚Ä¢
            <a href="https://bycell.co/ddmui" target="_blank" rel="noopener">Curr√≠culum</a> ‚Ä¢
            <a href="https://bycell.co/ddmua" target="_blank" rel="noopener">Recursos</a>
          `;
        } else if (isCreole){
          return `
            <strong>üíº S√®vis Travay TASK</strong><br><br>
            <strong>Pou randevou:</strong> Rele <a href="tel:609-337-1624">(609) 337-1624</a> (Social Services Specialist).<br><br>
            <strong>Pwogram:</strong><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">Emilio Culinary Academy</a><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">S√®tifikasyon SORA</a><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">S√®tifikasyon Forklift</a><br>
            ‚Ä¢ TASK'd to Work (soft skills)<br><br>
            <strong>Lyen:</strong> <a href="https://bycell.co/ddmtq" target="_blank" rel="noopener">Travay</a> ‚Ä¢
            <a href="https://bycell.co/ddmtr" target="_blank" rel="noopener">Al√®t</a> ‚Ä¢
            <a href="https://bycell.co/ddmui" target="_blank" rel="noopener">CV</a> ‚Ä¢
            <a href="https://bycell.co/ddmua" target="_blank" rel="noopener">Resous</a>
          `;
        } else {
          return `
            <strong>üíº TASK Employment Services</strong><br><br>
            <strong>To make an appointment:</strong> Call <a href="tel:609-337-1624">(609) 337-1624</a> (Social Services Specialist).<br><br>
            <strong>Programs:</strong><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">Emilio Culinary Academy</a><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">SORA security certification</a><br>
            ‚Ä¢ <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">Forklift certification</a><br>
            ‚Ä¢ TASK‚Äôd to Work (soft skills)<br><br>
            <strong>Links:</strong> <a href="https://bycell.co/ddmtq" target="_blank" rel="noopener">Jobs</a> ‚Ä¢
            <a href="https://bycell.co/ddmtr" target="_blank" rel="noopener">Alerts</a> ‚Ä¢
            <a href="https://bycell.co/ddmui" target="_blank" rel="noopener">Resume</a> ‚Ä¢
            <a href="https://bycell.co/ddmua" target="_blank" rel="noopener">Resources</a>
          `;
        }
      }

      // APPOINTMENTS / SCHEDULING
      if (/appointment|schedule|meeting|book|cita|programar|randevou|ki l√®/.test(text)){
        const base = `
          <strong>üìÖ Employment Services Appointments</strong><br><br>
          <strong>Make an appointment:</strong> Call <a href="tel:609-337-1624">(609) 337-1624</a> (Social Services Specialist).<br>
          <strong>When:</strong> Scheduled during meal hours (10:30AM‚Äì1:00PM).<br><br>
          <a href="https://bycell.co/ddmul" target="_blank" rel="noopener">Register online</a> ‚Ä¢
          <a href="https://trentonsoupkitchen.org/what-we-do/" target="_blank" rel="noopener">Full TASK services</a>
        `;
        if (isSpanish) return base.replace('Employment Services','Servicios de Empleo')
                                 .replace('Make an appointment:','Para programar:')
                                 .replace('Register online','Registrarse en l√≠nea')
                                 .replace('Full TASK services','Servicios de TASK');
        if (isCreole)  return base.replace('Employment Services','S√®vis Travay')
                                 .replace('Make an appointment:','Pou f√® randevou:')
                                 .replace('Register online','Enskri sou ent√®n√®t')
                                 .replace('Full TASK services','Tout s√®vis TASK');
        return base;
      }

      // HOURS / MEALS
      if (/hour|time|when|open|close|lunch|dinner|meal|eat|food|hora|almuerzo|cena|manje/.test(text)){
        const base = `
          <strong>üïí Hours</strong><br><br>
          <strong>Meals:</strong><br>
          Lunch: Mon‚ÄìFri 10:30 AM‚Äì1:00 PM<br>
          Dinner: Mon‚ÄìThu 3:30‚Äì5:00 PM<br><br>
          <strong>Employment Appointments:</strong> During lunch hours (10:30 AM‚Äì1:00 PM).<br>
          Phone: <a href="tel:609-337-1624">(609) 337-1624</a>
        `;
        if (isSpanish) return base.replace('Hours','Horarios')
                                  .replace('Meals','Comidas')
                                  .replace('Employment Appointments','Citas de Empleo')
                                  .replace('Phone','Tel√©fono');
        if (isCreole)  return base.replace('Hours','Or√®')
                                  .replace('Meals','Manje')
                                  .replace('Employment Appointments','Randevou Travay')
                                  .replace('Phone','Telef√≤n');
        return base;
      }

      // LOCATION
      if (/where|address|location|directions|map|parking|donde|direcci√≥n|ubicaci√≥n|kote|adr√®s/.test(text)){
        return `
          <strong>üìç Location & Contact</strong><br><br>
          <strong>Address:</strong> 72¬Ω Escher St, Trenton, NJ 08609<br>
          <strong>Appointments:</strong> <a href="tel:609-337-1624">(609) 337-1624</a> (Social Services Specialist)<br>
          <a href="https://www.google.com/maps?q=72+1/2,+72+Escher+St,+Trenton,+NJ+08609" target="_blank" rel="noopener">üìç Google Maps</a><br><br>
          <a href="https://bycell.co/ddmul" target="_blank" rel="noopener">Register</a> ‚Ä¢
          <a href="https://trentonsoupkitchen.org/what-we-do/" target="_blank" rel="noopener">All services</a>
        `;
      }

      // BUS / TRANSIT
      if (/bus|transport|nj transit|route|fare|ticket/.test(text)){
        return `
          <strong>üöå Getting to TASK</strong><br><br>
          <strong>Address:</strong> 72¬Ω Escher St, Trenton, NJ<br>
          <a href="https://www.njtransit.com/trip-planner-to" target="_blank" rel="noopener">NJ Transit Trip Planner</a><br>
          Phone (NJ Transit): 1-973-275-5555<br><br>
          We can help with bus passes for job appointments ‚Äî ask during your employment appointment.
        `;
      }

      // COMPUTER LAB
      if (/computer|internet|wifi|lab|email|application|online/.test(text)){
        return `
          <strong>üíª Computer Lab</strong><br><br>
          Open during meal hours (Mon‚ÄìFri 10:30 AM‚Äì1:00 PM, Mon‚ÄìThu 3:30‚Äì5:00 PM).<br>
          Help with online job applications, email, and <a href="https://bycell.co/ddmui" target="_blank" rel="noopener">resume support</a>.
        `;
      }

      // SUPPORT SERVICES
      if (/case management|housing|benefits|social services|assistance|help/.test(text)){
        return `
          <strong>ü§ù Support Services</strong><br><br>
          We can connect you to housing help, ID documents, peer recovery, and clothing for interviews. Ask the Social Services Specialist at <a href="tel:609-337-1624">(609) 337-1624</a>.
        `;
      }

      // DEFAULT
      if (isSpanish){
        return `
          <strong>üëã ¬°Hola! Soy el Asistente de TASK.</strong><br><br>
          Preg√∫ntame sobre empleo, horarios, direcciones o servicios.<br><br>
          <a href="https://bycell.co/ddmtq" target="_blank" rel="noopener">Empleos</a> ‚Ä¢
          <a href="https://bycell.co/ddmtr" target="_blank" rel="noopener">Alertas</a> ‚Ä¢
          <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">Entrenamientos</a><br>
          <a href="https://bycell.co/ddmui" target="_blank" rel="noopener">Curr√≠culum</a> ‚Ä¢
          <a href="https://bycell.co/ddmua" target="_blank" rel="noopener">Recursos</a> ‚Ä¢
          <a href="https://trentonsoupkitchen.org/what-we-do/" target="_blank" rel="noopener">Servicios</a>
        `;
      } else if (isCreole){
        return `
          <strong>üëã Bonjou! Mwen se Asistan TASK la.</strong><br><br>
          Mande m sou travay, or√®, direksyon oswa s√®vis yo.<br><br>
          <a href="https://bycell.co/ddmtq" target="_blank" rel="noopener">Travay</a> ‚Ä¢
          <a href="https://bycell.co/ddmtr" target="_blank" rel="noopener">Al√®t</a> ‚Ä¢
          <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">F√≤masyon</a><br>
          <a href="https://bycell.co/ddmui" target="_blank" rel="noopener">CV</a> ‚Ä¢
          <a href="https://bycell.co/ddmua" target="_blank" rel="noopener">Resous</a> ‚Ä¢
          <a href="https://trentonsoupkitchen.org/what-we-do/" target="_blank" rel="noopener">S√®vis</a>
        `;
      } else {
        return `
          <strong>üëã Hi! I'm the TASK Assistant.</strong><br><br>
          Ask me about jobs, hours, directions, or support services.<br><br>
          <a href="https://bycell.co/ddmtq" target="_blank" rel="noopener">Jobs</a> ‚Ä¢
          <a href="https://bycell.co/ddmtr" target="_blank" rel="noopener">Alerts</a> ‚Ä¢
          <a href="https://bycell.co/ddmtn" target="_blank" rel="noopener">Training</a><br>
          <a href="https://bycell.co/ddmui" target="_blank" rel="noopener">Resume</a> ‚Ä¢
          <a href="https://bycell.co/ddmua" target="_blank" rel="noopener">Resources</a> ‚Ä¢
          <a href="https://trentonsoupkitchen.org/what-we-do/" target="_blank" rel="noopener">Services</a>
        `;
      }
    }

    // Wiring + delegation (so Enter + arrow always work, and quick pills can also "ask")
    document.addEventListener('DOMContentLoaded', function(){
      const input = document.getElementById('userInput');
      const btn   = document.getElementById('sendButton');
      const quick = document.getElementById('quickRow');

      if (input){
        input.addEventListener('keydown', function(e){
          if (e.key === 'Enter'){ e.preventDefault(); sendMessage(); }
        });
        input.focus();
      }
      if (btn){
        btn.addEventListener('click', function(e){ e.preventDefault(); sendMessage(); });
      }
      if (quick){
        quick.addEventListener('click', function(e){
          const a = e.target.closest('a'); if(!a) return;
          const ask = a.getAttribute('data-ask');
          if (ask && !e.metaKey && !e.ctrlKey && !e.shiftKey){
            e.preventDefault();
            if (input) input.value = ask;
            sendMessage();
          }
        });
      }

      // Global error guard: show simple message instead of failing silently
      window.addEventListener('error', () => {
        const s = document.getElementById('status');
        if (s) s.textContent = '‚ö†Ô∏è JavaScript error detected. Quick links still work above.';
      }, { once:true });

      // Optional reachability ‚Äúping‚Äù (no-cors; best-effort only, won‚Äôt break anything)
      ['https://bycell.co/ddmtq','https://www.njtransit.com/trip-planner-to'].forEach(url=>{
        try{ fetch(url, {mode:'no-cors'}).catch(()=>{}); }catch(_){}
      });
    });
  </script>
</body>
</html>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').catch(()=>{});
  }
</script>
add_header Content-Security-Policy "default-src 'self' https: data: blob:; img-src * data: blob:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com data:; script-src 'self' 'unsafe-inline'; connect-src https:; frame-ancestors 'self'; base-uri 'self'; form-action 'self' https://bycell.co https://www.njtransit.com" always;
add_header X-Content-Type-Options nosniff always;
add_header Referrer-Policy no-referrer-when-downgrade always;
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
import helmet from "helmet";
app.use(helmet({
  contentSecurityPolicy: {
    useDefaults: true,
    directives: {
      "default-src": ["'self'", "https:", "data:", "blob:"],
      "img-src": ["*","data:","blob:"],
      "style-src": ["'self'","'unsafe-inline'","https://fonts.googleapis.com"],
      "font-src": ["https://fonts.gstatic.com","data:"],
      "script-src": ["'self'","'unsafe-inline'"],
      "connect-src": ["https:"],
      "frame-ancestors": ["'self'"],
      "base-uri": ["'self'"],
      "form-action": ["'self'","https://bycell.co","https://www.njtransit.com"]
    }
  },
  referrerPolicy: { policy: "no-referrer-when-downgrade" }
}));
